#!/usr/bin/env ruby

$LOAD_PATH << File.expand_path("../app", __dir__)

require 'bundler/setup'
require 'gpx_directions'

if ARGV.length != 2
  puts "USAGE: #{$PROGRAM_NAME} GPX_FILEPATH OSM_FILEPATH"

  exit 1
end

ARGV.each do |path|
  unless File.file?(path)
    puts "No such file: #{path}"

    exit 2
  end
end

directions = GpxDirections.generate_directions(
  gpx_filepath: ARGV[0],
  osm_filepath: ARGV[1]
)

puts directions
